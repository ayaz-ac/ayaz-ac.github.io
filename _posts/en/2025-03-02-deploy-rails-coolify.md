---
lang: en
page_id: deploiement-rails-coolify
permalink: /posts/deploy-a-ruby-on-rails-application-with-coolify
title: Deploy a Ruby On Rails application with Coolify
date: 2025-03-02
categories: [Rails]
tags: [Self-Host, Coolify]
author: ayaz
description: "Coolify is the perfect open-source solution for easily deploying Ruby on Rails apps through self-hosting, at a low cost and with great flexibility."
image: /assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/thumbnail.jpg
---
## Introduction
For a long time, Heroku was the go-to solution for quickly and freely deploying a Ruby on Rails application. But in [November 2022](https://help.heroku.com/RSBRUH58/removal-of-heroku-free-product-plans-faq){:target="_blank"}, everything changed: the platform removed its free plan, making all its services paid, even for small projects.

Following this announcement, several competitors like [Fly.io](https://fly.io){:target="_blank"} emerged with limited free plans. However, they eventually followed the same path, gradually removing their free offerings.

As an Indie Hacker, maintaining multiple projects online quickly becomes expensive, especially if the revenue doesn‚Äôt cover the costs.

Adding to this is another concern: GDPR compliance. Most PaaS providers host their data in the U.S., raising compliance issues for European users.

### The Solution? Self-Hosting
Given this situation, one clear alternative stands out: self-hosting your applications. With a personal server, no matter how many resources you use, your costs remain the same. Most importantly, you retain full control over your data.

But here‚Äôs the question: how can you self-host without struggling with complex configurations?

Traditionally, tools like Capistrano or Kamal are used for deployment, but they require advanced setup (server configuration, SSH access, reverse proxy, etc.).

Good news: there‚Äôs a much simpler alternative that handles all these challenges while offering the flexibility of Heroku‚Ä¶ **Coolify**.

## What is Coolify?
[Coolify](https://coolify.io){:target="_blank"} is an open-source, free alternative to PaaS platforms like Heroku. It allows you to deploy almost any application, regardless of the technology, in just a few clicks.

You have two options to use it: **Cloud mode** ($5/month) or **Self-hosted mode**. Personally, I chose to host Coolify on my own VPS from Hostinger with a [KVM2](https://www.hostinger.fr/vps){:target="_blank"}.

If you want to secure and configure your VPS before installing Coolify, I recommend this video: [Set up and Secure Your Own Server](https://youtu.be/Q1Y_g0wMwww?feature=shared){:target="_blank"}.
For Coolify installation, Syntax has an excellent video guide: [Coolify Crash Course](https://www.youtube.com/watch?v=Q1Y_g0wMwww&t=202s){:target="_blank"}.

## Deploying a Ruby on Rails Application
### Creating a New Project and an Environment
![Step 1](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_1.png)
![Step 2](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_2.png)

### Setting Up the Database
Creating a database in an environment is simple: just add a resource by searching for your database system (PostgreSQL, MySQL, etc.).
![Step 3](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_3.png)
![Step 4](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_4.png)

### Deploying with GitHub
For Coolify to deploy your project, you first need to create a GitHub app to access your repositories. This can be done directly from the ‚ÄúSources‚Äù menu.
![Step 5](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_5.png)
![Step 6](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_6.png)

### Deploying an Application
Just like your database, an application is also considered a resource in Coolify.
![Step 7](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_7.png)

To fetch your project from GitHub, select **"Private Repository (with GitHub App)"** from the list of services. Coolify will then clone your repository onto your server.
![Step 8](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_8.png)
![Step 9](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_9.png)

Make sure to select **"Dockerfile"** in the ‚ÄúBuild Pack‚Äù so Coolify uses it to deploy your application in a Docker container.
![Step 10](/assets/img/posts/deployer-une-application-ruby-on-rails-avec-coolify/step_10.png)

If you don‚Äôt have a pre-configured Dockerfile, you can modify the one generated by Rails in recent versions. Be sure to update the Ruby version in the Dockerfile.

```docker
# syntax = docker/dockerfile:1

ARG RUBY_VERSION=3.2.2
FROM docker.io/library/ruby:$RUBY_VERSION-slim AS base

WORKDIR /rails

RUN apt-get update -qq && \
    apt-get install --no-install-recommends -y curl wget libjemalloc2 libvips postgresql-client && \
    rm -rf /var/lib/apt/lists /var/cache/apt/archives

ENV RAILS_ENV="production" \
    BUNDLE_DEPLOYMENT="1" \
    BUNDLE_PATH="/usr/local/bundle" \
    BUNDLE_WITHOUT="development" \
    RAILS_SERVE_STATIC_FILES="1"

FROM base AS build

RUN apt-get update -qq && \
    apt-get install --no-install-recommends -y build-essential git libpq-dev pkg-config && \
    rm -rf /var/lib/apt/lists /var/cache/apt/archives

COPY Gemfile Gemfile.lock ./
RUN bundle install && \
    rm -rf ~/.bundle/ "${BUNDLE_PATH}"/ruby/*/cache "${BUNDLE_PATH}"/ruby/*/bundler/gems/*/.git && \
    bundle exec bootsnap precompile --gemfile

COPY . .

RUN bundle exec bootsnap precompile app/ lib/
RUN RAILS_ENV=production SECRET_KEY_BASE=dummy ./bin/rails assets:precompile

FROM base
COPY --from=build "${BUNDLE_PATH}" "${BUNDLE_PATH}"
COPY --from=build /rails /rails

RUN groupadd --system --gid 1000 rails && \
    useradd rails --uid 1000 --gid 1000 --create-home --shell /bin/bash && \
    chown -R rails:rails db log storage tmp
USER 1000:1000

EXPOSE 3000
CMD ["bash", "-c", "bin/rails db:prepare && bin/rails server -b '0.0.0.0'"]
```

### Environment Variables
Within your application‚Äôs resource settings, you can modify environment variables. To deploy your Rails application, you need at least these three:

- **DATABASE_URL**: Retrieve this value from your database resource (e.g., **"Postgres URL (internal)"** for PostgreSQL).
- **RAILS_ENV**: Usually set to `production`.
- **RAILS_MASTER_KEY**: Your project‚Äôs master key.

### Configuring the Domain Name
Inside your application resource settings, you can add domain names. Simply enter the domains that should point to your app, separated by commas.

On the DNS side, add these domains and set your server‚Äôs IP as the target.

### Going Further
Now that you have a VPS with Coolify, you can leverage it to host multiple services across your projects. A great example is Plausible.

[Plausible](https://plausible.io/#pricing){:target="_blank"} is a privacy-friendly, GDPR-compliant analytics service. You can either use their cloud version or self-host it for free with [Coolify](https://coolify.io/docs/services/plausible){:target="_blank"}.

### Welcome to the World of Self-Hosting
With Coolify, self-hosting applications has never been easier. Since it‚Äôs based on Docker, you can install almost any application effortlessly.

I have to warn you: once you start self-hosting, you‚Äôll want to host all your SaaS tools too‚Äîtrust me, we‚Äôve all been there!

To explore more, check out [Awesome Selfhosted](https://github.com/awesome-selfhosted/awesome-selfhosted).

With Coolify, self-hosting is more affordable, flexible, and hassle-free. **Don't wait‚Äîjump in!** üòé
